
<!DOCTYPE html><html class=''>
<head>
<title>Hi,from jason:) jLab test</title>
<script src="https://cdn.bootcss.com/js-polyfills/0.1.33/polyfill.js"></script>
<style class="cp-pen-styles">body {
    overflow: hidden;
    background: #111111;
}</style></head><body>
<canvas></canvas>
<script src='https://cdnjs.cloudflare.com/ajax/libs/stats.js/r11/Stats.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/zepto/1.0/zepto.min.js'></script>
<script>// Polyfill for requestAnimationFrame
(function() {
    let lastTime = 0;
    let vendors = ['ms', 'moz', 'webkit', 'o'];
    
    for (let x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
        window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
        window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] 
                                   || window[vendors[x]+'CancelRequestAnimationFrame'];
    }
 
    if (!window.requestAnimationFrame) {
        window.requestAnimationFrame = function (callback, element) {
            let currTime = new Date().getTime();
            let timeToCall = Math.max(0, 16 - (currTime - lastTime));
            let id = window.setTimeout(function() {
                callback(currTime + timeToCall);
            }, timeToCall);
 
            let lastTime = currTime + timeToCall;
            return id;
        };
    }
 
    if (!window.cancelAnimationFrame) {
        window.cancelAnimationFrame = function (id) {
            clearTimeout(id);
        };
    }
}());

let stats = new Stats();
stats.setMode(0);
stats.domElement.style.position = 'absolute';
stats.domElement.style.left = '0px';
stats.domElement.style.top = '0px';
document.body.appendChild(stats.domElement);

(function ($, window) {
    function Constellation (canvas, options) {
        let $canvas = $(canvas),
            context = canvas.getContext("2d"),
            defaults = {
                star: {
                    color: 'rgba(255, 255, 255, 0.5)',
                    width: 1,
                    randomWidth: true,
                },
                line: {
                    color: 'rgba(255, 255, 255, 0.5)',
                    width: 0.2,
                },
                position: {
                    x: 0,
                    y: 0,
                },
                width: window.innerWidth,
                height: window.innerHeight,
                velocity: 0.1,
                length: 100,
                distance: 120,
                radius: 150,
                stars: [],
            },
            config = $.extend(true, {}, defaults, options);
        
        function Star() {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() *  canvas.height;
            
            this.vx = (config.velocity * Math.random());
            this.vy = (config.velocity * Math.random());
            
            this.vx = Math.random() > 0.5 ? this.vx : - this.vx;
            this.vy = Math.random() > 0.5 ? this.vy : - this.vy;
            
            this.radius = config.star.randomWidth ? (Math.random() * config.star.width) : config.star.width;
            
            this.draw = function () {
                context.beginPath();
                context.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);
                context.fill();
            };
            
            this.animate = function () {
                if (this.x < 0 || this.x > canvas.width) {
                    this.vx = - this.vx;
                } else if (this.y < 0 || this.y > canvas.height) {
                    this.vy = - this.vy;
                }
                
                this.x += this.vx;
                this.y += this.vy;
            };
        }
        
        this.createStars = function () {
            let length = config.length;
            
            for (let i = 0; i < config.length; i ++) {
                let newStar = new Star();
                config.stars.push(newStar);
            }
        };
        
        this.drawStars = function () {
            
            for (let i = 0; i < config.length; i ++) {
                let star = config.stars[i];
                star.draw();
                star.animate();
            }
        };

        this.drawStarLines = function () {
            let iStar, jStar;
            
            for (let i = 0; i < config.length; i ++) {
                for (let j = i + 1; j < config.length; j ++) {
                    iStar = config.stars[i];
                    jStar = config.stars[j];
                    
                    let xDistance = Math.abs(iStar.x - jStar.x);
                    let yDistance = Math.abs(iStar.y - jStar.y);
                    
                    if (xDistance < config.distance && yDistance < config.distance) {
                        let xRadius = Math.abs(iStar.x - config.position.x);
                        let yRadius = Math.abs(iStar.y - config.position.y);
                        
                        if (xRadius < config.radius && yRadius < config.radius) {
                            context.beginPath();
                            context.moveTo(iStar.x, iStar.y);
                            context.lineTo(jStar.x, jStar.y);
                            context.stroke();
                            context.closePath();
                        }
                    }
                }
            }
        };
        
        this.drawLoop = function () {
            context.clearRect(0, 0, canvas.width, canvas.height);
            this.drawStars();
            this.drawStarLines();
            
            window.requestAnimationFrame(function() {
                stats.begin();
                this.drawLoop();
                stats.end();
            }.bind(this));
        };
        
        this.init = function () {
            canvas.width = config.width;
            canvas.height = config.height;
            
            context.fillStyle = config.star.color;
            context.strokeStyle = config.line.color;
            context.lineWidth = config.line.width;
            
            if (!options || !options.hasOwnProperty('position')) {
                config.position = {
                    x: canvas.width * 0.5,
                    y: canvas.height * 0.5,
                };
            }
            
            $canvas.on('mousemove', function(event) {
                config.position.x = event.pageX - $canvas.offset().left;
                config.position.y = event.pageY - $canvas.offset().top;
            });
            
            this.createStars();
            this.drawLoop();
        };
    }
    
    $.fn.constellation = function (options) {
        return this.each(function() {
            let c = new Constellation(this, options);
            c.init();
        });
    }
})($, window);

$('canvas').constellation({
    star: {
        color: 'rgba(255, 255, 255, 0.8)',
        width: 3,
    },
    line: {
        color: 'rgba(39, 210, 51, .5)',
        width: 0.6,
    },
    length: 150,
    distance: 200,
    radius: 100,
    velocity: 0.6,
});
//# sourceURL=pen.js
</script>
</body></html>
